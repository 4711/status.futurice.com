$(document).ready(function(){$("#update_data").pagerefresh({short_timeout:900,long_timeout:7200,filewatch:"ittickets.json"})});
function fetch_data(){function g(a){e.empty();var b=Raphael("dotschart"),c=[];ys=[];data=a.date_stats;axisy=a.ytitles;axisx=a.xtitles;for(var d=0;7>d;d++)for(a=0;24>a;a++)c.push(a);for(d=0;7>d;d++)for(a=0;24>a;a++)ys.push(d);b.dotchart(10,10,900,300,c,ys.reverse(),data,{symbol:"o",max:10,heat:!0,axis:"0 0 1 1",axisxstep:23,axisystep:6,axisxlabels:axisx,axisxtype:" ",axisytype:" ",axisylabels:axisy.reverse()}).hover(function(){this.marker=this.marker||b.tag(this.x,this.y,this.value,0,this.r+2).insertBefore(this);
this.marker.show()},function(){this.marker&&this.marker.hide()})}var c=$("#workflowchart"),e=$("#dotschart"),f=$("#placeholder"),b=$("body").data("pagerefresh-data").content.data;!0!==$("body").data("ittickets-initialized")&&($("body").data("ittickets-initialized",!0),c.slideUp(),c.empty(),e.empty(),$("#emailpieholder").empty(),g(b.dots.all),$("#dots_all").addClass("active"));(function(){for(var a in b)$("#"+a)!=null&&$("#"+a).html(b[a]);$(".dots-btn").click(function(){if(!$(this).hasClass("active")){e.show();
c.slideUp();var a=$(this).data("name");g(b.dots[a]);f.html("mouse over the circles for more details");f.removeClass("hidden");$("#name2").addClass("hidden")}});$("#change_graph").click(function(){f.html("mouse over the graph for more details");e.slideUp();c.html("");process(b.workflow);c.removeClass("hidden");c.slideDown()});$("#emailpieholder").empty();a=[b.other_users,b.futurice_users];Raphael("emailpieholder",400,200).piechart(190,100,69,a,{legend:["External %%.%%","Internal %%.%%"],legendpos:"west"}).hover(function(){this.sector.stop();
this.sector.scale(1.1,1.1,this.cx,this.cy);if(this.label){this.label[0].stop();this.label[0].attr({r:7.5});this.label[1].attr({"font-weight":800})}},function(){this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},500,"bounce");if(this.label){this.label[0].animate({r:5},500,"bounce");this.label[1].attr({"font-weight":400})}})})()};
