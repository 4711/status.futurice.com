$(document).ready(function(){$("#update_data").pagerefresh({short_timeout:15*60,long_timeout:120*60,filewatch:"ittickets.json"})});function fetch_data(){var f=$("#workflowchart"),g=$("#dotschart"),d=$("#placeholder"),b=$("body").data("pagerefresh-data").content.data;function a(){$("body").data("ittickets-initialized",true);f.slideUp();f.empty();g.empty();$("#emailpieholder").empty();c(b.dots.all);$("#dots_all").addClass("active")}function c(j){g.empty();var m=Raphael("dotschart");var k=[];ys=[];data=j.date_stats,axisy=j.ytitles;axisx=j.xtitles;for(var h=0;h<7;h++){for(var l=0;l<24;l++){k.push(l)}}for(var n=0;n<7;n++){for(var l=0;l<24;l++){ys.push(n)}}m.dotchart(10,10,900,300,k,ys.reverse(),data,{symbol:"o",max:10,heat:true,axis:"0 0 1 1",axisxstep:23,axisystep:6,axisxlabels:axisx,axisxtype:" ",axisytype:" ",axisylabels:axisy.reverse()}).hover(function(){this.marker=this.marker||m.tag(this.x,this.y,this.value,0,this.r+2).insertBefore(this);this.marker.show()},function(){this.marker&&this.marker.hide()})}function e(){for(var j in b){if($("#"+j)!=null){$("#"+j).html(b[j])}}$(".dots-btn").click(function(){if($(this).hasClass("active")){return}g.show();f.slideUp();var m=$(this).data("name");c(b.dots[m]);d.html("mouse over the circles for more details");d.removeClass("hidden");$("#name2").addClass("hidden")});$("#change_graph").click(function(){d.html("mouse over the graph for more details");g.slideUp();f.html("");process(b.workflow);f.removeClass("hidden");f.slideDown()});$("#emailpieholder").empty();var l=[b.other_users,b.futurice_users],i={legend:["External %%.%%","Internal %%.%%"],legendpos:"west"};var k=Raphael("emailpieholder",400,200),h=k.piechart(190,100,69,l,i);h.hover(function(){this.sector.stop();this.sector.scale(1.1,1.1,this.cx,this.cy);if(this.label){this.label[0].stop();this.label[0].attr({r:7.5});this.label[1].attr({"font-weight":800})}},function(){this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},500,"bounce");if(this.label){this.label[0].animate({r:5},500,"bounce");this.label[1].attr({"font-weight":400})}})}if($("body").data("ittickets-initialized")!==true){a()}e()};