function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function automatic_moment_update(){$(".automatic-moment").each(function(){var a=$(this).data("moment-timeout");a&&$(this).html(moment(a).fromNow())});setTimeout("automatic_moment_update()",1E3)}
function fetch_data(){var a=$("body").data("pagerefresh-data").content;$("#last_error").data("moment-timeout",1E3*a.autofill.lasterrortime);$("#last_check").data("moment-timeout",1E3*a.autofill.lasttesttime);var c=[],d=[],e=[],f=[];$.each(a.per_day,function(a,b){c.push(Math.floor(100*(b.uptime/864))/100);d.push(Math.floor(100*(b.unmonitored/864))/100);e.push(Math.floor(100*(b.downtime/864))/100);f.push(b.avgresponse)});$("#response_graph").empty();$("#response_graph").css("height",400).css("width",
1E3);$("#uptime_graph").empty();$("#uptime_graph").css("height",400).css("width",1E3);var b=Raphael("response_graph"),a=function(){this.flag.remove()};b.barchart(0,10,900,400,[c,d,e],{stacked:!0}).hover(function(){this.flag=b.popup(this.bar.x,this.bar.y,this.bar.value+"%"||"?%").insertBefore(this)},a);b=Raphael("uptime_graph");b.barchart(0,10,900,400,[f]).hover(function(){this.flag=b.popup(this.bar.x,this.bar.y,this.bar.value+"ms"||"?ms").insertBefore(this)},a)}
$(document).ready(function(){var a="per-check-"+getParameterByName("id")+".json";$("#update_data").pagerefresh({short_timeout:60,long_timeout:900,filewatch:a});automatic_moment_update()});
